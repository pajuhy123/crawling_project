{#crawlnigdata_list.html}#}
{%extends "blog/layout.html"%}



{%block content %}

 <h3 align= center> 꿀잼 집합소 </h3> 
 <p align= center> 여러 커뮤니티들의 실시간 인기글 모음 </p>
 <hr />

<div class= 'box'>
   <div class='btn btn-primary' style= 'background-color:DarkSeaGreen '>에펨코리아</div>
   <div class='btn btn-primary' style= 'background-color:GoldenRod '>오유</div>
   <div class='btn btn-primary' style= 'background-color:IndianRed  '>네이트 판</div>
   <div class='btn btn-primary' style= 'background-color:CadetBlue  '>SLR</div>
   <div class='btn btn-primary' style= 'background-color:DarkCyan  '>MLB</div>
   <div class='btn btn-primary' style= 'background-color:DarkKhaki '>클리앙</div>
   <div class='btn btn-primary' style= 'background-color:CornflowerBlue  '>인벤</div>
   <div class='btn btn-primary' style= 'background-color:DarkGrey   '>루리웹</div>
   <div class='btn btn-primary' style= 'background-color:DarkOrange  '>웃긴대학</div>
   <div class='btn btn-primary' style= 'background-color:Fuchsia  '>보배드림</div>
   <div class='btn btn-primary' style= 'background-color:DarkCyan   '>와이고수</div>
   <div class='btn btn-primary' style= 'background-color:DimGrey  '>일간베스트</div>
   <div class='btn btn-primary' style= 'background-color:SkyBlue '>인스티즈</div>
   <div class='btn btn-primary' style= 'background-color:DarkSalmon    '>더쿠</div>
   <div class='btn btn-primary' style= 'background-color:BlueViolet   '>포모스</div>
   <div class='btn btn-primary' style= 'background-color:DarkGoldenRod   '>드림엑스</div>
   <div class='btn btn-primary' style= 'background-color:Chocolate   '>플래시24</div>
   <div class='btn btn-primary' style= 'background-color:Brown  '>개드립</div>
   <div class='btn btn-primary' style= 'background-color:Red  '><a href='{% url 'blog:notice'%}'>후방주의만 보기</a></div>

   <div class='instiz1' ><br>
     {%if crawling%}
      {% for crawling in crawling%}
         <table class='list'>
         <div class='first'>에펨코리아&nbsp;&nbsp;<a href='{{crawling.link_fmkorea}}' target="_blank">{{crawling.fmkorea}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='//{{crawling.link_flash2}}' target="_blank">{{crawling.flash2}}</a></div>
         <div class='first'>오유&nbsp;&nbsp;<a href='//{{crawling.link_ou}}' target="_blank">{{crawling.ou}}</a></div>
         <div class='first'>네이트판&nbsp;&nbsp;<a href='{{crawling.link_pan}}' target="_blank">{{crawling.pan}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='//{{crawling.link_fomos1}}' target="_blank">{{crawling.fomos1}}</a></div>
         <div class='first'>인스티즈&nbsp;&nbsp;<a href='//{{crawling.link_instiz}}' target="_blank">{{crawling.instiz}}</a></div>
         <div class='first'>SLR&nbsp;&nbsp;<a href='//{{crawling.link_slr}}' target="_blank">{{crawling.slr}}</a></div>
         <div class='first'>MLB&nbsp;&nbsp;<a href='{{crawling.link_mlb}}' target="_blank">{{crawling.mlb}}</a></div>
         <div class='first'>인벤&nbsp;&nbsp;<a href='{{crawling.link_inben}}' target="_blank">{{crawling.inben}}</a></div>
         <div class='first'>루리웹&nbsp;&nbsp;<a href='{{crawling.link_ruri}}' target="_blank">{{crawling.ruri}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='//{{crawling.link_dream1}}' target="_blank">{{crawling.dream1}}</a></div>
         <div class='first'>웃긴대학&nbsp;&nbsp;<a href='//{{crawling.link_utde}}' target="_blank">{{crawling.utde}}</a></div>
         <div class='first'>보배드림&nbsp;&nbsp;<a href='//{{crawling.link_bobe}}' target="_blank">{{crawling.bobe}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='{{crawling.link_namsung}}' target="_blank">{{crawling.namsung}}</a></div>
         <div class='first'>와이고수&nbsp;&nbsp;<a href='{{crawling.link_ygosu}}' target="_blank">{{crawling.ygosu}}</a></div>
         <div class='first'>개드립&nbsp;&nbsp;<a href='{{crawling.link_drip}}' target="_blank">{{crawling.drip}}</a></div>
         <div class='first'>더쿠&nbsp;&nbsp;<a href='//{{crawling.link_theqoo}}' target="_blank">{{crawling.theqoo}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='{{crawling.link_dogge}}' target="_blank">{{crawling.dogge}}</a></div>
         <div class='first'>드림엑스&nbsp;&nbsp;<a href='//{{crawling.link_dream2}}' target="_blank">{{crawling.dream2}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='//{{crawling.link_bobe2}}' target="_blank">{{crawling.bobe2}}</a></div>
         <div class='first'>클리앙&nbsp;&nbsp;<a href='//{{crawling.link_clien}}' target="_blank">{{crawling.clien}}</a></div>
         <div class='first'>포모스&nbsp;&nbsp;<a href='//{{crawling.link_fomos2}}' target="_blank">{{crawling.fomos2}}</a></div>
         <div class='first'>일간베스트&nbsp;&nbsp;<a href='{{crawling.link_ilbe}}' target="_blank">{{crawling.ilbe}}</a></div>
         <div class='first'>후방주의&nbsp;&nbsp;<a href='//{{crawling.link_flash1}}' target="_blank">{{crawling.flash1}}</a></div>
        </table>
       {%endfor%}
      {%else%}
      <p>데이터를 가져오고 있습니다. 10 초 뒤  새로고침 하시길 바랍니다. </p>
    {%endif%}
      </div>


    <div id='post_list_ajax'></div> {#Ajax 결과물을 추가할 곳#}
    <input id='page' type='hidden' value='2'> {#페이지 정보를 입력할 곳#}
    <button id='callmorepost' type='button' class='btn btn-primary btn-block'>
          More Post</button> {#페이지 스크롤 이벤트가 작동하지 않을 경우 클릭함.#}
    

 </div>
      <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" language="javascript">
        //scroll event
        $('#callmorepost').click(function(){
          var page = $("#page").val();
          if(page<5){
            callMorePostAjax(page);
            $("#page").val(parseInt(page)+1);
          }
          else{
            alert('더 이상의 자료가 없습니다. 업데이트 되기를 기다려 주세요');
          }
       });
      /* 스크롤시 자동으로 데이터 로딩
        $(window).scroll(function(){
            var scrollHeight = $(window).scrollTop() + $(window).height();
            var documentHeight = $(document).height();
            
            if (scrollHeight + 300 >= documentHeight){
                alert("sdfsdfdsf");
                var page = $('#page').val();
                callMorePostAjax(page);
                $('#page').val(parseInt(page)+1);
            }
        });    */
      
      function callMorePostAjax(page){
            $.ajax({
                  type : "GET",
                  url : "{%url 'blog:crawling_ajax' %}",
                  dataType : "html",
                  data : {
                        "page":page
                  },
            })
            .done(function addMorePostAjax(data, textStatus, jqXHR) {
                $('#post_list_ajax').append(data);
            })
		.fail(function(xhr, status, errorThrown) {
			$("#text").html("오류가 발생했습니다.<br>")
                  .append("오류명: " + errorThrown + "<br>")
                  .append("상태: " + status);
		})
         }
    </script>
{%endblock%}

